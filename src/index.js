//—ñ–º–ø–æ—Ä—Ç—É—î–º–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —Ç–∞ —ñ–Ω—à—ñ —Ñ–∞–π–ª–∏
import { fetchTrendMoves } from './js/api';
import { createTrendMovesMarkup } from './js/createMarkup';
import { fetchDataById } from './js/fetch-data-by-id';
import throttle from 'lodash.throttle'; // npm i lodash.throttle
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
// refs
const refs = {
  searchFormEl: document.querySelector('.form-search'),
  galleryContainerEl: document.querySelector('.gallery-container'),
  galleryListEl: document.querySelector('.gallery-list'),
  aboutTeamBtn: document.querySelector('.about-team'),
  backdropMovieModal: document.querySelector('.backdrop'),
  modalCloseBtn: document.querySelector('button[data-movie-modal-close]'),
  btnUpEl: document.querySelector('.btn-up'),
  addToWatchedBtn: document.querySelector('button[data-btn-to-watched]'),
  addToQueueBtn: document.querySelector('button[data-btn-to-queue]'),
  movieModalEl: document.querySelector('div[data-movie-modal]'),
};
//
//
//
//

let movieIdForModalMarkup = null; //–ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ –∫–∞—Ä—Ç–∫—É —Ñ—ñ–ª—å–º—É –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ —Å—é–¥–∏ –∑–∞–∏—Å—É—î—Ç—å—Å—è id
// —Ñ—ñ–ª—å–º—É —ñ –∑–∞ —Ü–∏–º id –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑–∞–ø–∏—Ç –Ω–∞ –±–µ–∫–µ–Ω–¥
let dataForModalMarkup = null; //–û–±'—î–∫—Ç —ñ–∑ –ø–æ–≤–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ —Ñ—ñ–ª—å–º,
//—è–∫–∏–π –º–∏ –æ—Ç—Ä–∏–º—É—î–º–æ –ø—ñ—Å–ª—è –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –∫–∞—Ä—Ç–∫—É —Ñ—ñ–ª—å–º—É –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ.
// –¶–µ–π –æ–±'—î–∫—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î—Ç—å—Å—è —â–æ—Ä–∞–∑—É –ø—ñ—Å–ª—è –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –∫–∞—Ä—Ç–∫—É

//
//
//
//
//
//
//–ê–ª—ñ–Ω–∞ –ø—Ä–∏—Å—è–∂–Ω—é–∫ –¥–µ—â–æ —Å–ø–ª—É—Ç–∞–ª–∞
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//–û–ª–µ–∫—Å–∞–Ω–¥—Ä –ú–∏—Ä–æ–Ω–µ—Ü—å
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//–Ü–≥–æ—Ä
//
//

refs.btnUpEl.addEventListener('click', scrollUp);

function show() {
  refs.btnUpEl.classList.remove('btn-up_hide');
}

function hide() {
  refs.btnUpEl.classList.add('btn-up_hide');
}

window.addEventListener(
  'scroll',
  throttle(() => {
    const scrollY = window.scrollY || document.documentElement.scrollTop;

    scrollY > 400 ? show() : hide();
  }, 500)
);

function scrollUp() {
  window.scrollTo({
    top: 0,
    left: 0,
    behavior: 'smooth',
  });
}
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//–Ü—Ä–∏–Ω–∞ –ü–µ—Ç—Ä–µ–Ω–∫–æ
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//–ú–∞—Ä'—è–Ω–∞ –°–æ–±–∞—à–µ–≤—Å—å–∫–∞
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//–°–µ—Ä–≥—ñ–π –¢—Ä–µ—Ñ–µ–ª—å
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//–î–µ–Ω–∏—Å
fetchTrendMoves()
  .then(data => {
    renderMarkup(data);
  })
  .catch(error => console.log(error));

function renderMarkup(array) {
  const markup = createTrendMovesMarkup(array);
  refs.galleryListEl.insertAdjacentHTML('beforeend', markup);
}
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//–ú–∞—Ç–≤—ñ–π –ü—Ä–∏—â–µ–Ω–∫–æ
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//–Ü—Ä–∏–Ω–∞
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//–û–ª–µ–Ω–∞
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//–û–ª–µ–∫—Å–∞–Ω–¥—Ä
console.log(refs);
console.log(refs.backdropMovieModal);
console.log(refs.movieModal);
console.log(refs.modalCloseBtn);
console.log(refs.addToWatchedBtn);
console.log(refs.addToQueueBtn);
refs.modalCloseBtn.addEventListener('click', e => {
  console.log('–¥–≤–µ—Ä—ñ –∑–∞—á–∏–Ω—è—é—Ç—å—Å—è üòâ');
  refs.backdropMovieModal.classList.add("is-hidden");
  refs.movieModal.classList.add("is-hidden");
  console.log(refs.backdropMovieModal);
  console.log(refs.movieModal);
});
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//–ú–æ—Å–∫–∞–ª–µ—Ü—å

function toggleModal() {
  refs.movieModalEl.classList.toggle('is-hidden');
}

function modalOpener(event) {
  if (
    event.target.nodeName !== 'IMG' &&
    event.target.nodeName !== 'DIV' &&
    event.target.nodeName !== 'H3' &&
    event.target.nodeName !== 'SPAN'
  ) {
    return;
  }
  toggleModal();

  if (event.target.nodeName === 'DIV') {
    movieIdForModalMarkup = event.target.dataset.id;
    return;
  }
  movieIdForModalMarkup = event.target.parentElement.dataset.id;
  return;
}

function handleMovieCard(event) {
  modalOpener(event); //—Ü—è —Ñ—É–Ω–∫—Ü—ñ—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î –∑–Ω–∞—á–µ–Ω–Ω—è movieIdForModalMarkup
  dataForModalMarkup = fetchDataById(movieIdForModalMarkup)
    .then(data => {
      console.log(data);
    })
    .catch(error => console.log(error));

  //—Ç—É—Ç –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –º–∞–ª—é—î —Ä–æ–∑–º—ñ—Ç–∫—É —ñ –≤ –Ω–µ—ó –≤–∫–ª–∞—Å—Ç–∏ dataForModalMarkup

  console.log(dataForModalMarkup);
}

refs.galleryContainerEl.addEventListener('click', handleMovieCard);

refs.modalCloseBtn.addEventListener('click', toggleModal);
