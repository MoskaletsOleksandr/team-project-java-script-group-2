function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};const n=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];function o({results:t}){return t.map((({poster_path:t,genre_ids:e,release_date:o,title:a,id:i})=>{let l=function(t){const e=[];for(const o of t)n.forEach((t=>{t.id===o&&e.push(` ${t.name}`)}));return e}(e);return l=function(t){if(t.length>2){let e=t.slice(0,2);return e.push(" ...other"),e}return t}(l),`<li class="gallery-item">\n                    <div class="gallery-container-img" data-id='${i}'>\n                    <div class="gallery-card" data-id='${i}'>\n                        <img class="gallery-img" src="https://image.tmdb.org/t/p/w400${t}" alt="${a}">\n                        <button class="trailer-button" type="button">Trailer</button> \n                        </div>\n                        <div class="gallery-film" data-id='${i}'>\n                        <h3 class="film-title">${a}\n                        </h3>\n                        <span class="film-genres">${l}</span><span class="film-year"> | ${o.slice(0,4)}</span></div>\n                    </div>\n                </li>`})).join("")}async function a(t){const e=await fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=18d2ef0015120b4f2a7b992abe7c1251`);if(!e.ok)throw new Error(e.statusText);return await e.json()}var i,l=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,d=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,m="object"==typeof self&&self&&self.Object===Object&&self,f=u||m||Function("return this")(),p=Object.prototype.toString,g=Math.max,v=Math.min,b=function(){return f.Date.now()};function h(t,e,n){var o,a,i,l,r,s,d=0,c=!1,u=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=o,i=a;return o=a=void 0,d=e,l=t.apply(i,n)}function p(t){return d=t,r=setTimeout(w,e),c?f(t):l}function h(t){var n=t-s;return void 0===s||n>=e||n<0||u&&t-d>=i}function w(){var t=b();if(h(t))return E(t);r=setTimeout(w,function(t){var n=e-(t-s);return u?v(n,i-(t-d)):n}(t))}function E(t){return r=void 0,m&&o?f(t):(o=a=void 0,l)}function j(){var t=b(),n=h(t);if(o=arguments,a=this,s=t,n){if(void 0===r)return p(s);if(u)return r=setTimeout(w,e),f(s)}return void 0===r&&(r=setTimeout(w,e)),l}return e=_(e)||0,y(n)&&(c=!!n.leading,i=(u="maxWait"in n)?g(_(n.maxWait)||0,e):i,m="trailing"in n?!!n.trailing:m),j.cancel=function(){void 0!==r&&clearTimeout(r),d=0,o=s=a=r=void 0},j.flush=function(){return void 0===r?l:E(b())},j}function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==p.call(t)}(t))return NaN;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(l,"");var n=s.test(t);return n||d.test(t)?c(t.slice(2),n?2:8):r.test(t)?NaN:+t}function w(t){const{poster_path:e,title:n,vote_average:o,vote_count:a,popularity:i,original_title:l,genres:r,overview:s}=t;return`\n                   <div class="js-film-info__thumb">\n                     <img\n                       src="https://image.tmdb.org/t/p/original${e}"\n                       alt="${n}"\n                       width="240"\n                       class="js-film-info__poster"\n                     />\n                  </div>\n                  <div class="js-film-info__content">\n                    <h2 class="js-film-info__name">${n}</h2>\n                    <table class="js-film-info__table-thumb">\n                      <tr class="js-film-info__item">\n                        <td class="js-film-info__title">Vote / Votes</td>\n                        <td>\n                          <span class="js-film-info__vote">${o}</span>\n                          <span class="slash">/</span>\n                          <span class="js-film-info__votes">${a}</span>\n                        </td>\n                      </tr>\n                      <tr class="js-film-info__item">\n                        <td class="js-film-info__title">Popularity</td>\n                        <td class="js-film-info__popularity">${i}</td>\n                      </tr>\n                      <tr class="js-film-info__item">\n                        <td class="js-film-info__title">Original Title</td>\n                        <td class="js-film-info__original-title">${l}</td>\n                      </tr>\n                      <tr class="js-film-info__item">\n                        <td class="js-film-info__title">Genre</td>\n                        <td class="js-film-info__genre">${r.map((t=>t.name)).join(", ")}</td>\n                      </tr>\n                    </table>\n                    <h3 class="js-film-info__description-title">About</h3>\n                    <p class="js-film-info__description-text">${s}\n                    </p>\n                    <div class="js-film-info__btns">\n                      <button\n                        type="button"\n                        class="js-film-info__btn active-btn"\n                        data-btn=add-to-watched\n                      >\n                        add to Watched\n                      </button>\n                      <button type="button" class="js-film-info__btn" data-btn-to-queue>\n                        add to queue\n                      </button>\n                    </div>\n                  </div>`}i=function(t,e,n){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return y(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),h(t,e,{leading:o,maxWait:e,trailing:a})};const E={searchFormEl:document.querySelector(".form-search"),galleryContainerEl:document.querySelector(".gallery-container"),galleryListEl:document.querySelector(".gallery-list"),aboutTeamBtn:document.querySelector(".about-team"),btnUpEl:document.querySelector(".btn-up"),backdropMovieModal:document.querySelector(".backdrop"),movieModalEl:document.querySelector("div[data-movie-modal]"),movieModalFilmInfoEl:document.querySelector(".js-film-info"),modalCloseBtn:document.querySelector("button[data-movie-modal-close]"),addToQueueBtn:document.querySelector("button[data-btn-to-queue]"),teamModalOpenBtn:document.querySelector("button[data-team-modal-open]"),teamModalCloseBtn:document.querySelector("button[data-team-modal-close]"),teamModal:document.querySelector("div[data-team-modal]")};let j=null,M=null;function S(){E.teamModal.classList.add("is-hidden-team")}function L(t){"backdrop"!==t.target.className&&"modal__close"!==t.target.classList[0]&&"icon-close"!==t.target.classList[0]&&"svg-icon-close"!==t.target.classList[0]&&"Escape"!==t.code||(E.backdropMovieModal.classList.add("is-hidden"),E.movieModalEl.classList.add("is-hidden"),E.backdropMovieModal.removeEventListener("click",L),window.removeEventListener("keydown",L))}E.btnUpEl.addEventListener("click",(function(){window.scrollTo({top:0,left:0,behavior:"smooth"})})),window.addEventListener("scroll",t(i)((()=>{(window.scrollY||document.documentElement.scrollTop)>400?E.btnUpEl.classList.remove("btn-up_hide"):E.btnUpEl.classList.add("btn-up_hide")}),500)),E.teamModalOpenBtn.addEventListener("click",(function(){E.teamModal.classList.remove("is-hidden-team")})),E.teamModalCloseBtn.addEventListener("click",S),E.teamModal.addEventListener("click",(function(t){t.target===E.teamModal&&S()})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&S()})),E.movieModalEl.addEventListener("click",(function(t){"add-to-watched"===t.target.dataset.btn?(console.log(t.target.dataset),M.then((e=>{const n=localStorage.getItem("watched"),o=JSON.parse(n);o.push(e),localStorage.setItem("watched",JSON.stringify(o)),t.target.textContent="Remove from watched",t.target.dataset.btn="remove-from-watched"})).catch((t=>{console.log(t)}))):"remove-from-watched"===t.target.dataset.btn&&(console.log(t.target.dataset),M.then((e=>{const n=localStorage.getItem("watched"),o=JSON.parse(n);o.push(e),localStorage.setItem("watched",JSON.stringify(o)),t.target.textContent="Add to watched",t.target.dataset.btn="add-to-watched"})).catch((t=>{console.log(t)})));return})),async function(){const t=await fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=18d2ef0015120b4f2a7b992abe7c1251");if(!t.ok)throw new Error(t.statusText);return await t.json()}().then((t=>{!function(t){const e=o(t);E.galleryListEl.insertAdjacentHTML("beforeend",e)}(t)})).catch((t=>console.log(t))),E.backdropMovieModal.addEventListener("click",L),window.addEventListener("keydown",L),E.galleryContainerEl.addEventListener("click",(function(t){if(function(t){if("DIV"===t.target.nodeName)return void(j=t.target.dataset.id);j=t.target.parentElement.dataset.id}(t),"IMG"!==t.target.nodeName&&"DIV"!==t.target.nodeName&&"H3"!==t.target.nodeName&&"SPAN"!==t.target.nodeName)return;M=a(j).then((t=>{E.backdropMovieModal.classList.remove("is-hidden"),E.movieModalEl.classList.remove("is-hidden"),E.backdropMovieModal.addEventListener("click",L),window.addEventListener("keydown",L);const e=w(t);return E.movieModalFilmInfoEl.innerHTML=e,t})).catch((t=>console.log(t))),function(){if(localStorage.watched||localStorage.queue){const t=localStorage.getItem("watched");JSON.parse(t).map((t=>{const{id:e}=t;e===Number(j)?E.addToWatchedBtn.textContent="Remove from watch":E.addToWatchedBtn.textContent="Add to watch"}));const e=localStorage.getItem("queue");JSON.parse(e).map((t=>{const{id:e}=t;e===Number(j)?E.addToQueueBtn.textContent="Add to Queue":E.addToQueueBtn.textContent="Remove from Queue"}))}else{let t=[];localStorage.setItem("watched",JSON.stringify(t)),localStorage.setItem("queue",JSON.stringify(t))}}()}));
//# sourceMappingURL=index.2ee1b460.js.map
