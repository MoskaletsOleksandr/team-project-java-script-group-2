function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};async function n(t){const e=await fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=18d2ef0015120b4f2a7b992abe7c1251`);if(!e.ok)throw new Error(e.statusText);return await e.json()}async function o(t){const e=`https://api.themoviedb.org/3/search/movie?api_key=18d2ef0015120b4f2a7b992abe7c1251&query=${t}`,n=await fetch(e);if(!n.ok)throw new Error(n.statusText);return await n.json()}let a="https://image.tmdb.org/t/p/w400";const i=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];function r({results:t}){return t.map((({poster_path:t,genre_ids:e,release_date:n,title:o,id:r})=>{a="https://image.tmdb.org/t/p/w400",null===t&&(a="",t="https://img.freepik.com/premium-vector/default-image-icon-vector-missing-picture-page-for-website-design-or-mobile-app-no-photo-available_87543-11093.jpg?w=1480"),""===n&&(n="None");let l=function(t){const e=[];for(const n of t)i.forEach((t=>{t.id===n&&e.push(` ${t.name}`)}));return e}(e);return l=function(t){if(t.length>2){let e=t.slice(0,2);return e.push(" ...other"),e}return t}(l),0===l.length&&(l="Unknown genres"),`<li class="gallery-item">\n                    <div class="gallery-container-img" data-id='${r}'>\n                    <div class="gallery-card" data-id='${r}'>\n                        <img class="gallery-img" src="${a}${t}" alt="${o}">\n                        <button class="trailer-button" type="button">Trailer</button> \n                        </div>\n                        <div class="gallery-film" data-id='${r}'>\n                        <h3 class="film-title">${o}\n                        </h3>\n                        <span class="film-genres">${l}</span><span class="film-year"> | ${n.slice(0,4)}</span></div>\n                    </div>\n                </li>`})).join("")}var l,s=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,m=parseInt,f="object"==typeof e&&e&&e.Object===Object&&e,g="object"==typeof self&&self&&self.Object===Object&&self,p=f||g||Function("return this")(),v=Object.prototype.toString,h=Math.max,b=Math.min,y=function(){return p.Date.now()};function _(t,e,n){var o,a,i,r,l,s,d=0,c=!1,u=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=o,i=a;return o=a=void 0,d=e,r=t.apply(i,n)}function g(t){return d=t,l=setTimeout(v,e),c?f(t):r}function p(t){var n=t-s;return void 0===s||n>=e||n<0||u&&t-d>=i}function v(){var t=y();if(p(t))return _(t);l=setTimeout(v,function(t){var n=e-(t-s);return u?b(n,i-(t-d)):n}(t))}function _(t){return l=void 0,m&&o?f(t):(o=a=void 0,r)}function S(){var t=y(),n=p(t);if(o=arguments,a=this,s=t,n){if(void 0===l)return g(s);if(u)return l=setTimeout(v,e),f(s)}return void 0===l&&(l=setTimeout(v,e)),r}return e=E(e)||0,w(n)&&(c=!!n.leading,i=(u="maxWait"in n)?h(E(n.maxWait)||0,e):i,m="trailing"in n?!!n.trailing:m),S.cancel=function(){void 0!==l&&clearTimeout(l),d=0,o=s=a=l=void 0},S.flush=function(){return void 0===l?r:_(y())},S}function w(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function E(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==v.call(t)}(t))return NaN;if(w(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=w(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=c.test(t);return n||u.test(t)?m(t.slice(2),n?2:8):d.test(t)?NaN:+t}function S(t){const{poster_path:e,title:n,vote_average:o,vote_count:a,popularity:i,original_title:r,genres:l,overview:s}=t;return`\n                   <div class="js-film-info__thumb">\n                     <img\n                       src="https://image.tmdb.org/t/p/original${e}"\n                       alt="${n}"\n                       width="240"\n                       class="js-film-info__poster"\n                     />\n                  </div>\n                  <div class="js-film-info__content">\n                    <h2 class="js-film-info__name">${n}</h2>\n                    <table class="js-film-info__table-thumb">\n                      <tr class="js-film-info__item">\n                        <td class="js-film-info__title">Vote / Votes</td>\n                        <td>\n                          <span class="js-film-info__vote">${o}</span>\n                          <span class="slash">/</span>\n                          <span class="js-film-info__votes">${a}</span>\n                        </td>\n                      </tr>\n                      <tr class="js-film-info__item">\n                        <td class="js-film-info__title">Popularity</td>\n                        <td class="js-film-info__popularity">${i}</td>\n                      </tr>\n                      <tr class="js-film-info__item">\n                        <td class="js-film-info__title">Original Title</td>\n                        <td class="js-film-info__original-title">${r}</td>\n                      </tr>\n                      <tr class="js-film-info__item">\n                        <td class="js-film-info__title">Genre</td>\n                        <td class="js-film-info__genre">${l.map((t=>t.name)).join(", ")}</td>\n                      </tr>\n                    </table>\n                    <h3 class="js-film-info__description-title">About</h3>\n                    <p class="js-film-info__description-text">${s}\n                    </p>\n                    <div class="js-film-info__btns">\n                      <button\n                        type="button"\n                        class="js-film-info__btn active-btn"\n                        data-btn=add-to-watched\n                      >\n                        add to Watched\n                      </button>\n                      <button type="button" class="js-film-info__btn" data-btn-to-queue>\n                        add to queue\n                      </button>\n                    </div>\n                  </div>`}l=function(t,e,n){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return w(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),_(t,e,{leading:o,maxWait:e,trailing:a})};const L={searchFormEl:document.querySelector(".form-search"),searchInputEl:document.querySelector(".input-search"),galleryContainerEl:document.querySelector(".gallery-container"),galleryListEl:document.querySelector(".gallery-list"),aboutTeamBtn:document.querySelector(".about-team"),btnUpEl:document.querySelector(".btn-up"),backdropMovieModal:document.querySelector(".backdrop"),movieModalEl:document.querySelector("div[data-movie-modal]"),movieModalFilmInfoEl:document.querySelector(".js-film-info"),modalCloseBtn:document.querySelector("button[data-movie-modal-close]"),addToQueueBtn:document.querySelector("button[data-btn-to-queue]"),teamModalOpenBtn:document.querySelector("button[data-team-modal-open]"),teamModalCloseBtn:document.querySelector("button[data-team-modal-close]"),teamModal:document.querySelector("div[data-team-modal]")};let j=null,k=null;function M(){window.scrollTo({top:0,left:0,behavior:"smooth"})}L.btnUpEl.addEventListener("click",M),window.addEventListener("scroll",t(l)((()=>{(window.scrollY||document.documentElement.scrollTop)>400?L.btnUpEl.classList.remove("btn-up_hide"):L.btnUpEl.classList.add("btn-up_hide")}),500));const T=document.querySelector(".btn-theme"),q=document.querySelector(".header-container"),$=document.querySelector(".btn-icon-moon"),N=document.querySelector(".btn-icon-sun");function O(){document.body.classList.add("dark"),N.classList.remove("btn-icon-hidden"),$.classList.add("btn-icon-hidden"),q.classList.add("header-container-dark"),localStorage.theme="dark"}function x(){L.teamModal.classList.add("is-hidden-team")}function I(t){const e=r(t);L.galleryListEl.innerHTML="",L.galleryListEl.insertAdjacentHTML("beforeend",e)}function C(t){"backdrop"!==t.target.className&&"modal__close"!==t.target.classList[0]&&"icon-close"!==t.target.classList[0]&&"svg-icon-close"!==t.target.classList[0]&&"Escape"!==t.code||(L.backdropMovieModal.classList.add("is-hidden"),L.movieModalEl.classList.add("is-hidden"),L.backdropMovieModal.removeEventListener("click",C),window.removeEventListener("keydown",C))}T.addEventListener("click",(()=>{document.body.classList.contains("dark")?(document.body.classList.remove("dark"),$.classList.remove("btn-icon-hidden"),N.classList.add("btn-icon-hidden"),q.classList.remove("header-container-dark"),localStorage.theme="light"):O()})),"dark"===localStorage.theme&&O(),L.teamModalOpenBtn.addEventListener("click",(function(){L.teamModal.classList.remove("is-hidden-team")})),L.teamModalCloseBtn.addEventListener("click",x),L.teamModal.addEventListener("click",(function(t){t.target===L.teamModal&&x()})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&x()})),L.movieModalEl.addEventListener("click",(function(t){"add-to-watched"===t.target.dataset.btn?(console.log(t.target.dataset),k.then((e=>{const n=localStorage.getItem("watched"),o=JSON.parse(n);o.push(e),localStorage.setItem("watched",JSON.stringify(o)),t.target.textContent="Remove from watched",t.target.dataset.btn="remove-from-watched"})).catch((t=>{console.log(t)}))):"remove-from-watched"===t.target.dataset.btn&&(console.log(t.target.dataset),k.then((e=>{const n=localStorage.getItem("watched"),o=JSON.parse(n);o.push(e),localStorage.setItem("watched",JSON.stringify(o)),t.target.textContent="Add to watched",t.target.dataset.btn="add-to-watched"})).catch((t=>{console.log(t)})));return})),async function(){const t=await fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=18d2ef0015120b4f2a7b992abe7c1251");if(!t.ok)throw new Error(t.statusText);return await t.json()}().then((t=>{I(t)})).catch((t=>console.log(t))),L.searchFormEl.addEventListener("submit",(function(t){t.preventDefault();const e=L.searchInputEl.value;if(""===e)return void alert("Please try again");o(e.trim()).then((t=>{console.log(t),0!==t.results.length?(I(t),M()):alert("Please try again")})).catch((t=>console.log(t)))})),L.backdropMovieModal.addEventListener("click",C),window.addEventListener("keydown",C),L.galleryContainerEl.addEventListener("click",(function(t){if(function(t){if("DIV"===t.target.nodeName)return void(j=t.target.dataset.id);j=t.target.parentElement.dataset.id}(t),"IMG"!==t.target.nodeName&&"DIV"!==t.target.nodeName&&"H3"!==t.target.nodeName&&"SPAN"!==t.target.nodeName)return;k=n(j).then((t=>{L.backdropMovieModal.classList.remove("is-hidden"),L.movieModalEl.classList.remove("is-hidden"),L.backdropMovieModal.addEventListener("click",C),window.addEventListener("keydown",C);const e=S(t);return L.movieModalFilmInfoEl.innerHTML=e,t})).catch((t=>console.log(t))),function(){if(localStorage.watched||localStorage.queue){const t=localStorage.getItem("watched");JSON.parse(t).map((t=>{const{id:e}=t;e===Number(j)?L.addToWatchedBtn.textContent="Remove from watch":L.addToWatchedBtn.textContent="Add to watch"}));const e=localStorage.getItem("queue");JSON.parse(e).map((t=>{const{id:e}=t;e===Number(j)?L.addToQueueBtn.textContent="Add to Queue":L.addToQueueBtn.textContent="Remove from Queue"}))}else{let t=[];localStorage.setItem("watched",JSON.stringify(t)),localStorage.setItem("queue",JSON.stringify(t))}}()}));
//# sourceMappingURL=index.32635f7d.js.map
