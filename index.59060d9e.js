function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};async function n(e){const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=18d2ef0015120b4f2a7b992abe7c1251`);if(!t.ok)throw new Error(t.statusText);return await t.json()}async function a(e){const t=`https://api.themoviedb.org/3/search/movie?api_key=18d2ef0015120b4f2a7b992abe7c1251&query=${e}`,n=await fetch(t);if(!n.ok)throw new Error(n.statusText);return await n.json()}let o="https://image.tmdb.org/t/p/w400";const i=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];function r({results:e}){return e.map((({poster_path:e,genre_ids:t,release_date:n,title:a,id:r})=>{o="https://image.tmdb.org/t/p/w400",null===e&&(o="",e="https://img.freepik.com/premium-vector/default-image-icon-vector-missing-picture-page-for-website-design-or-mobile-app-no-photo-available_87543-11093.jpg?w=1480"),""===n&&(n="None");let s=function(e){const t=[];for(const n of e)i.forEach((e=>{e.id===n&&t.push(` ${e.name}`)}));return t}(t);return s=function(e){if(e.length>2){let t=e.slice(0,2);return t.push(" ...other"),t}return e}(s),0===s.length&&(s="Unknown genres"),`<li class="gallery-item">\n                    <div class="gallery-container-img" data-id='${r}'>\n                    <div class="gallery-card" data-id='${r}'>\n                        <img class="gallery-img" src="${o}${e}" alt="${a}">\n                        <button class="trailer-button" type="button">Trailer</button> \n                        </div>\n                        <div class="gallery-film" data-id='${r}'>\n                        <h3 class="film-title">${a}\n                        </h3>\n                        <span class="film-genres">${s}</span><span class="film-year"> | ${n.slice(0,4)}</span></div>\n                    </div>\n                </li>`})).join("")}var s,l=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,m=parseInt,f="object"==typeof t&&t&&t.Object===Object&&t,g="object"==typeof self&&self&&self.Object===Object&&self,p=f||g||Function("return this")(),h=Object.prototype.toString,v=Math.max,b=Math.min,y=function(){return p.Date.now()};function w(e,t,n){var a,o,i,r,s,l,d=0,c=!1,u=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=a,i=o;return a=o=void 0,d=t,r=e.apply(i,n)}function g(e){return d=e,s=setTimeout(h,t),c?f(e):r}function p(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-d>=i}function h(){var e=y();if(p(e))return w(e);s=setTimeout(h,function(e){var n=t-(e-l);return u?b(n,i-(e-d)):n}(e))}function w(e){return s=void 0,m&&a?f(e):(a=o=void 0,r)}function E(){var e=y(),n=p(e);if(a=arguments,o=this,l=e,n){if(void 0===s)return g(l);if(u)return s=setTimeout(h,t),f(l)}return void 0===s&&(s=setTimeout(h,t)),r}return t=S(t)||0,_(n)&&(c=!!n.leading,i=(u="maxWait"in n)?v(S(n.maxWait)||0,t):i,m="trailing"in n?!!n.trailing:m),E.cancel=function(){void 0!==s&&clearTimeout(s),d=0,a=l=o=s=void 0},E.flush=function(){return void 0===s?r:w(y())},E}function _(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function S(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(_(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var n=c.test(e);return n||u.test(e)?m(e.slice(2),n?2:8):d.test(e)?NaN:+e}function E(e){const{poster_path:t,title:n,vote_average:a,vote_count:o,popularity:i,original_title:r,genres:s,overview:l}=e;return`\n                   <div class="js-film-info__thumb">\n                     <img\n                       src="https://image.tmdb.org/t/p/original${t}"\n                       alt="${n}"\n                       width="240"\n                       class="js-film-info__poster"\n                     />\n                  </div>\n                  <div class="js-film-info__content">\n                    <h2 class="js-film-info__name">${n}</h2>\n                    <table class="js-film-info__table-thumb">\n                      <tr class="js-film-info__item">\n                        <td class="js-film-info__title">Vote / Votes</td>\n                        <td>\n                          <span class="js-film-info__vote">${a}</span>\n                          <span class="slash">/</span>\n                          <span class="js-film-info__votes">${o}</span>\n                        </td>\n                      </tr>\n                      <tr class="js-film-info__item">\n                        <td class="js-film-info__title">Popularity</td>\n                        <td class="js-film-info__popularity">${i}</td>\n                      </tr>\n                      <tr class="js-film-info__item">\n                        <td class="js-film-info__title">Original Title</td>\n                        <td class="js-film-info__original-title">${r}</td>\n                      </tr>\n                      <tr class="js-film-info__item">\n                        <td class="js-film-info__title">Genre</td>\n                        <td class="js-film-info__genre">${s.map((e=>e.name)).join(", ")}</td>\n                      </tr>\n                    </table>\n                    <h3 class="js-film-info__description-title">About</h3>\n                    <p class="js-film-info__description-text">${l}\n                    </p>\n                    <div class="js-film-info__btns">\n                      <button\n                        type="button"\n                        class="js-film-info__btn active-btn"\n                        data-watched-btn=add-to-watched\n                      >\n                        add to Watched\n                      </button>\n                      <button type="button" class="js-film-info__btn" data-queue-btn=add-to-queue>\n                        add to queue\n                      </button>\n                    </div>\n                  </div>`}s=function(e,t,n){var a=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return _(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),w(e,t,{leading:a,maxWait:t,trailing:o})};const L={searchFormEl:document.querySelector(".form-search"),searchInputEl:document.querySelector(".input-search"),galleryContainerEl:document.querySelector(".gallery-container"),galleryListEl:document.querySelector(".gallery-list"),aboutTeamBtn:document.querySelector(".about-team"),btnUpEl:document.querySelector(".btn-up"),backdropMovieModal:document.querySelector(".backdrop"),movieModalEl:document.querySelector("div[data-movie-modal]"),movieModalFilmInfoEl:document.querySelector(".js-film-info"),modalCloseBtn:document.querySelector("button[data-movie-modal-close]"),teamModalOpenBtn:document.querySelector("button[data-team-modal-open]"),teamModalCloseBtn:document.querySelector("button[data-team-modal-close]"),teamModal:document.querySelector("div[data-team-modal]")};let j=null,k=null;function q(){window.scrollTo({top:0,left:0,behavior:"smooth"})}L.btnUpEl.addEventListener("click",q),window.addEventListener("scroll",e(s)((()=>{(window.scrollY||document.documentElement.scrollTop)>400?L.btnUpEl.classList.remove("btn-up_hide"):L.btnUpEl.classList.add("btn-up_hide")}),500));const M=document.querySelector(".btn-theme"),N=document.querySelector(".header-container"),T=document.querySelector(".btn-icon-moon"),$=document.querySelector(".btn-icon-sun");function O(){document.body.classList.add("dark"),$.classList.remove("btn-icon-hidden"),T.classList.add("btn-icon-hidden"),N.classList.add("header-container-dark"),localStorage.theme="dark"}function I(){L.teamModal.classList.add("is-hidden-team")}function x(e){const t=r(e);L.galleryListEl.innerHTML="",L.galleryListEl.insertAdjacentHTML("beforeend",t)}function B(e){"backdrop"!==e.target.className&&"modal__close"!==e.target.classList[0]&&"icon-close"!==e.target.classList[0]&&"svg-icon-close"!==e.target.classList[0]&&"Escape"!==e.code||(L.backdropMovieModal.classList.add("is-hidden"),L.movieModalEl.classList.add("is-hidden"),L.backdropMovieModal.removeEventListener("click",B),window.removeEventListener("keydown",B))}M.addEventListener("click",(()=>{document.body.classList.contains("dark")?(document.body.classList.remove("dark"),T.classList.remove("btn-icon-hidden"),$.classList.add("btn-icon-hidden"),N.classList.remove("header-container-dark"),localStorage.theme="light"):O()})),"dark"===localStorage.theme&&O(),L.teamModalOpenBtn.addEventListener("click",(function(){L.teamModal.classList.remove("is-hidden-team")})),L.teamModalCloseBtn.addEventListener("click",I),L.teamModal.addEventListener("click",(function(e){e.target===L.teamModal&&I()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&I()})),L.movieModalEl.addEventListener("click",(function(e){"add-to-watched"===e.target.dataset.watchedBtn?(console.log(e.target.dataset),k.then((t=>{const n=localStorage.getItem("watched"),a=JSON.parse(n);a.push(t),localStorage.setItem("watched",JSON.stringify(a)),e.target.textContent="Remove from watched",e.target.dataset.watchedBtn="remove-from-watched"})).catch((e=>{console.log(e)}))):"remove-from-watched"===e.target.dataset.watchedBtn&&(console.log(e.target.dataset),k.then((t=>{const n=localStorage.getItem("watched"),a=JSON.parse(n);a.push(t),localStorage.setItem("watched",JSON.stringify(a)),e.target.textContent="Add to watched",e.target.dataset.watchedBtn="add-to-watched"})).catch((e=>{console.log(e)})));return})),L.movieModalEl.addEventListener("click",(function(e){"add-to-queue"===e.target.dataset.queueBtn?(console.log(e.target.dataset),k.then((t=>{const n=localStorage.getItem("queue"),a=JSON.parse(n);a.push(t),localStorage.setItem("queue",JSON.stringify(a)),e.target.textContent="Remove from queue",e.target.dataset.queueBtn="remove-from-queue"})).catch((e=>{console.log(e)}))):"remove-from-queue"===e.target.dataset.queueBtn&&(console.log(e.target.dataset),k.then((t=>{const n=localStorage.getItem("queue"),a=JSON.parse(n);a.push(t),localStorage.setItem("queue",JSON.stringify(a)),e.target.textContent="Add to queue",e.target.dataset.queueBtn="add-to-queue"})).catch((e=>{console.log(e)})));return})),async function(){const e=await fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=18d2ef0015120b4f2a7b992abe7c1251");if(!e.ok)throw new Error(e.statusText);return await e.json()}().then((e=>{x(e)})).catch((e=>console.log(e))),L.searchFormEl.addEventListener("submit",(function(e){e.preventDefault();const t=L.searchInputEl.value;if(""===t)return void alert("Please try again");a(t.trim()).then((e=>{console.log(e),0!==e.results.length?(x(e),q()):alert("Please try again")})).catch((e=>console.log(e)))})),L.backdropMovieModal.addEventListener("click",B),window.addEventListener("keydown",B),L.galleryContainerEl.addEventListener("click",(function(e){if(function(e){if("DIV"===e.target.nodeName)return void(j=e.target.dataset.id);j=e.target.parentElement.dataset.id}(e),"IMG"!==e.target.nodeName&&"DIV"!==e.target.nodeName&&"H3"!==e.target.nodeName&&"SPAN"!==e.target.nodeName)return;k=n(j).then((e=>{L.backdropMovieModal.classList.remove("is-hidden"),L.movieModalEl.classList.remove("is-hidden"),L.backdropMovieModal.addEventListener("click",B),window.addEventListener("keydown",B);const t=E(e);return L.movieModalFilmInfoEl.innerHTML=t,e})).catch((e=>console.log(e))),function(){if(localStorage.watched||localStorage.queue){const e=localStorage.getItem("watched");JSON.parse(e).map((e=>{const{id:t}=e;t===Number(j)?L.addToWatchedBtn.textContent="Remove from watch":L.addToWatchedBtn.textContent="Add to watch"}));const t=localStorage.getItem("queue");JSON.parse(t).map((e=>{const{id:t}=e;t===Number(j)?L.addToQueueBtn.textContent="Add to Queue":L.addToQueueBtn.textContent="Remove from Queue"}))}else{let e=[];localStorage.setItem("watched",JSON.stringify(e)),localStorage.setItem("queue",JSON.stringify(e))}}()}));
//# sourceMappingURL=index.59060d9e.js.map
