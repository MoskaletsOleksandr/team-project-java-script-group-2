function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=a.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},a.parcelRequired7c6=i),i.register("kyEFX",(function(t,a){var n,o;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var i={};n=function(e){for(var t=Object.keys(e),a=0;a<t.length;a++)i[t[a]]=e[t[a]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("kyEFX").register(JSON.parse('{"1zJhX":"library.f6360c8f.js","i2NY3":"noimage.abcafdb5.jpg","5UbS1":"index.1fc1e52b.css","eM9ss":"library.22fe412d.js"}'));var r=i("krGWQ");i("6NKwh"),i("eo4cx"),i("j7el6"),i("9OeKo");var d=i("7rYDH"),l=i("dbKnH"),c=i("boIUg"),s=i("31u3U");s=i("31u3U");s=i("31u3U"),s=i("31u3U");var u;u=new URL(i("kyEFX").resolve("i2NY3"),import.meta.url).toString();const m=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];function g(e){const a=m.slice(0,2).map((e=>` ${e.name}`));return m.length>2&&a.push("...other"),e.map((({poster_path:e,release_date:n,title:o,id:i})=>(""===n&&(n="None"),`<li class="gallery-item">\n                    <div class="gallery-container-img" data-id='${i}'>\n                    <div class="gallery-card" data-id='${i}'>\n                        <img class="gallery-img" src="${e?`https://image.tmdb.org/t/p/w500/${e}`:t(u)}" alt="${o}">\n                        </div>\n                        <div class="gallery-film" data-id='${i}'>\n                        <h3 class="film-title">${o}\n                        </h3>\n                        <span class="film-genres">${a}</span><span class="film-year"> | ${n.slice(0,4)}</span></div>\n                    </div>\n                </li>`))).join("")}let v=null,f=null;function h(){r.default.teamModal.classList.add("is-hidden-team")}r.default.teamModalOpenBtn.addEventListener("click",(function(){r.default.teamModal.classList.remove("is-hidden-team")})),r.default.teamModalCloseBtn.addEventListener("click",h),r.default.teamModal.addEventListener("click",(function(e){e.target===r.default.teamModal&&h()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&h()})),r.default.movieModalEl.addEventListener("click",(function(e){const t=document.querySelector(".js-film-info__btns"),a=document.querySelector(".gallery-item");"add-to-watched"===e.target.dataset.watchedBtn?f.then((n=>{const o=(0,s.loadLocalStorage)("watched");o.forEach((e=>{Number(e.id)===Number(n.id)&&a.remove()})),o.push(n),(0,s.saveLocalStorage)("watched",o),e.target.textContent="Remove from watched",e.target.dataset.watchedBtn="remove-from-watched",e.target.classList.add("active-btn"),t.children[1].classList.remove("active-btn")})).catch((e=>{console.log(e)})):"remove-from-watched"===e.target.dataset.watchedBtn&&f.then((a=>{const n=(0,s.loadLocalStorage)("watched"),o=n.findIndex((e=>Number(e.id)===Number(a.id)));n.splice(o,1),localStorage.removeItem("watched"),(0,s.saveLocalStorage)("watched",n),e.target.textContent="Add to watched",e.target.dataset.watchedBtn="add-to-watched",e.target.classList.add("active-btn"),t.children[1].classList.remove("active-btn")})).catch((e=>{console.log(e)}))})),r.default.movieModalEl.addEventListener("click",(function(e){const t=document.querySelector(".js-film-info__btns");document.querySelector(".gallery-item"),"add-to-queue"===e.target.dataset.queueBtn?f.then((a=>{const n=(0,s.loadLocalStorage)("queue");n.push(a),(0,s.saveLocalStorage)("queue",n),e.target.textContent="Remove from queue",e.target.dataset.queueBtn="remove-from-queue",e.target.classList.add("active-btn"),t.children[0].classList.remove("active-btn")})).catch((e=>{console.log(e)})):"remove-from-queue"===e.target.dataset.queueBtn&&f.then((a=>{const n=(0,s.loadLocalStorage)("queue"),o=n.findIndex((e=>Number(e.id)===Number(a.id)));n.splice(o,1),localStorage.removeItem("queue"),(0,s.saveLocalStorage)("queue",n),e.target.textContent="Add to queue",e.target.dataset.queueBtn="add-to-queue",e.target.classList.add("active-btn"),t.children[0].classList.remove("active-btn")})).catch((e=>{console.log(e)}))}));const b=document.querySelector(".watched-btn"),L=document.querySelector(".queue-btn"),p=document.querySelector(".gallery-lib-list"),y=document.querySelector(".library-container");b.addEventListener("click",E),L.addEventListener("click",k),console.log(b.classList[2]);let w,S=[],M=[];function E(){if(y.style.display="none",b.classList.add("is-active-lib"),L.classList.remove("is-active-lib"),S=JSON.parse(localStorage.getItem("watched"))||[],S.length<=0)return y.style.display="block",void(p.innerHTML="");const e=g(S);p.innerHTML=e,(0,c.renderTrailerMarkup)(S)}function k(){if(b.classList.remove("is-active-lib"),L.classList.add("is-active-lib"),M=JSON.parse(localStorage.getItem("queue"))||[],y.style.display="none",M.length<=0)return y.style.display="block",void(p.innerHTML="");const e=g(M);p.innerHTML=e,(0,c.renderTrailerMarkup)(M)}function q(e){"backdrop"!==e.target.className&&"modal__close-btn"!==e.target.classList[0]&&"icon-close"!==e.target.classList[0]&&"svg-icon-close"!==e.target.classList[0]&&"Escape"!==e.code||(r.default.backdropMovieModal.classList.add("is-hidden"),r.default.movieModalEl.classList.add("is-hidden"),r.default.bodyEl.style.overflow="scroll",r.default.backdropMovieModal.removeEventListener("click",q),window.removeEventListener("keydown",q),function(){const e=JSON.parse(localStorage.getItem("watched")),t=JSON.parse(localStorage.getItem("queue"));b.classList[2]&&void 0!==e&&E(),L.classList[2]&&w!==t&&k()}())}E(),r.default.backdropMovieModal.addEventListener("click",q),window.addEventListener("keydown",q),r.default.galleryLibListEl.addEventListener("click",(function(e){if(function(e){if("DIV"===e.target.nodeName)return void(v=e.target.dataset.id);v=e.target.parentElement.dataset.id}(e),"IMG"!==e.target.nodeName&&"DIV"!==e.target.nodeName&&"H3"!==e.target.nodeName&&"SPAN"!==e.target.nodeName)return;f=(0,d.fetchDataById)(v).then((e=>{r.default.backdropMovieModal.classList.remove("is-hidden"),r.default.movieModalEl.classList.remove("is-hidden"),r.default.backdropMovieModal.addEventListener("click",q),window.addEventListener("keydown",q);const t=(0,l.createMoveModalMarkup)(e,v);return r.default.movieModalFilmInfoEl.innerHTML=t,r.default.bodyEl.style.overflow="hidden",e})).catch((e=>console.log(e))),initialLocalStorage=JSON.parse(localStorage.getItem("watched")),w=JSON.parse(localStorage.getItem("queue"))}));
//# sourceMappingURL=library.f6360c8f.js.map
